{"version":3,"file":"index.js","sources":["../src/js/pagination.js","../src/js/products-api.js","../src/js/refs.js","../src/js/modal.js","../src/js/render-function.js","../src/js/storage.js","../src/js/constants.js","../src/js/sroll.js","../src/js/helpers.js","../src/js/handlers.js","../src/home.js"],"sourcesContent":["const paginationInitState = {\n  page: 1,\n  limit: 12,\n  skip: 0,\n  total: 0,\n  totalPages: 0,\n};\n\nexport let pagination = { ...paginationInitState };\n\nexport function updatePagination({ page, total, reset = false } = {}) {\n  if (reset) {\n    pagination = { ...paginationInitState };\n    return;\n  }\n  if (typeof page === 'number' && page > 0) {\n    pagination.page = page;\n  }\n  if (typeof total === 'number' && total >= 0) {\n    pagination.total = total;\n    pagination.totalPages = Math.ceil(pagination.total / pagination.limit);\n  }\n}\n","import Axios from 'axios';\n\nconst axios = Axios.create({\n  baseURL: 'https://dummyjson.com',\n});\n\nexport const getProductCategories = async () => {\n  const res = await axios.get('/products/category-list');\n  return ['all', ...res.data];\n};\n\n//!======================================================\n\nexport const getProducts = async (currentPage = 1) => {\n  const params = createParams({ limit: 12, currentPage });\n  const res = await axios.get('/products', { params });\n  return res.data;\n};\n\nexport const getProductsByCategory = async ({\n  selectedCategory,\n  currentPage = 1,\n}) => {\n  const params = createParams({ limit: 12, currentPage });\n  const res = await axios.get(`/products/category/${selectedCategory}`, {\n    params,\n  });\n  return res.data;\n};\n\nexport const getProductById = async id => {\n  const res = await axios.get(`/products/${id}`);\n  return res.data;\n};\n\nexport const getProductsBySearchValue = async ({ query, currentPage = 1 }) => {\n  const params = createParams({ limit: 12, currentPage, q: query });\n  const res = await axios.get(`/products/search`, { params });\n  return res.data;\n};\n\n//!======================================================\nfunction createParams({ limit, currentPage, ...rest }) {\n  const skip = (currentPage - 1) * limit;\n  return { ...rest, limit, skip };\n}\n","const refs = {\n  categoryListEl: document.querySelector('.js-categories-list'),\n  productsListEl: document.querySelector('.js-products-list'),\n  notFoundEl: document.querySelector('.js-not-found'),\n  loaderEl: document.querySelector('.js-loader'),\n  loadMoreBtnEl: document.querySelector('.js-load-more-btn'),\n  closeModalBtnEl: document.querySelector('[data-modal-close]'),\n  modalEl: document.querySelector('[data-modal]'),\n  modalProductEl: document.querySelector('.js-modal-product'),\n  searchFormEl: document.querySelector('.js-search-form'),\n  searchFormSubmitBtnEl: document.querySelector('.js-search-form__btn-submit'),\n  searchFormClearBtnEl: document.querySelector('.js-search-form__btn-clear'),\n};\n\nexport default refs;\n","import refs from './refs';\n\n//! Event Listeners ======================================================\nrefs.closeModalBtnEl.addEventListener('click', closeModal);\nrefs.modalEl.addEventListener('click', handleBackdropClick);\n\n//! Handlers======================================================\nexport function openModal() {\n  refs.modalEl.classList.add('modal--is-open');\n  document.addEventListener('keydown', handleEscKeydown);\n}\n\nexport function closeModal() {\n  refs.modalEl.classList.remove('modal--is-open');\n  document.removeEventListener('keydown', handleEscKeydown);\n}\n\nfunction handleEscKeydown(e) {\n  if (e.key === 'Escape') {\n    closeModal();\n  }\n}\n\nfunction handleBackdropClick(e) {\n  if (e.target === refs.modalEl) {\n    closeModal();\n  }\n}\n","import { pagination } from './pagination';\nimport { getProductById } from './products-api';\nimport refs from './refs';\nimport { openModal } from './modal';\nimport { showMessage } from './helpers';\n\n//Category ======================================================\nconst categoryItemTemplate = item => {\n  return ` <li class=\"categories__item\">\n             <button class=\"categories__btn js-categories__btn\" type=\"button\">${item}</button>\n           </li>\n        `;\n};\n\nconst categoryItemsTemplate = items =>\n  items.map(categoryItemTemplate).join('\\n');\n\nexport const createCategoryList = categories => {\n  const markup = categoryItemsTemplate(categories);\n  refs.categoryListEl.innerHTML = markup;\n};\n\n//Product ======================================================\n\nconst productItemTemplate = item => {\n  const { id, thumbnail, title, brand = '', category, price } = item;\n\n  return `<li class=\"products__item js-products__item\" data-id=\"${id}\">\n            <img class=\"products__image\" src=\"${thumbnail}\" alt=\"${title}\" loading=\"lazy\" />\n            <p class=\"products__title\">${title}</p>\n            ${\n              brand\n                ? `<p class=\"products__brand\">\n                  <span class=\"products__brand--bold\">Brand: ${brand}</span>\n              </p>`\n                : ''\n            }\n            <p class=\"products__category\">Category: ${category}</p>\n            <p class=\"products__price\">Price: ${price}$</p>\n          </li>\n        `;\n};\n\nconst productItemsTemplate = items => items.map(productItemTemplate).join('\\n');\n\nexport const createProductsList = products => {\n  const markup = productItemsTemplate(products);\n  if (pagination.page > 1) {\n    refs.productsListEl.insertAdjacentHTML('beforeend', markup);\n  } else {\n    refs.productsListEl.innerHTML = markup;\n  }\n};\n\n//ModalProduct ======================================================\n\nexport const modalProductTemplate = item => {\n  const {\n    title,\n    tags,\n    description,\n    shippingInformation,\n    returnPolicy,\n    price,\n    images,\n  } = item;\n  const image = images[0];\n\n  const tagsMarkup = Array.isArray(tags) ? productTagsTemplate(tags) : '';\n\n  return `<img class=\"modal-product__img\" src=\"${image}\" alt=\"${title}\" loading=\"lazy\" />\n          <div class=\"modal-product__content\">\n            <p class=\"modal-product__title\">${title}</p>\n              <ul class=\"modal-product__tags\">\n                ${tagsMarkup}   \n              </ul>\n              <p class=\"modal-product__description\">${description}</p>\n              <p class=\"modal-product__shipping-information\">Shipping: ${shippingInformation}</p>\n              <p class=\"modal-product__return-policy\">Return Policy: ${returnPolicy}</p>\n              <p class=\"modal-product__price\">Price: ${price} $</p>\n              <button class=\"modal-product__buy-btn\" type=\"button\">Buy</button>\n          </div>`;\n};\n\nfunction productTagTemplate(tag) {\n  return `<li class=\"modal-product__tag\">${tag}</li>`;\n}\n\nfunction productTagsTemplate(tags) {\n  return tags.map(productTagTemplate).join('\\n');\n}\n\nexport async function renderModalProduct(id) {\n  try {\n    const product = await getProductById(id);\n    const modalProduct = modalProductTemplate(product);\n    refs.modalProductEl.innerHTML = modalProduct;\n  } catch (error) {\n    console.log(error.message);\n    showMessage({ message: error.message, type: 'error' });\n  }\n\n  openModal();\n}\n\n// Loader and Loadmore button ======================================================\n\nexport const showLoader = () => {\n  refs.loaderEl.classList.add('visible');\n};\n\nexport const hideLoader = () => {\n  refs.loaderEl.classList.remove('visible');\n};\n\nexport const positionLoaderBottom = () => {\n  refs.loaderEl.classList.add('load-more');\n};\n\nexport const positionLoaderTop = () => {\n  refs.loaderEl.classList.remove('load-more');\n};\n\nexport const showLoadMoreButton = () => {\n  refs.loadMoreBtnEl.classList.remove('is-hidden');\n};\n\nexport const hideLoadMoreButton = () => {\n  refs.loadMoreBtnEl.classList.add('is-hidden');\n};\n","import { showMessage } from './helpers';\n\nexport const initialFormData = {\n  searchValue: '',\n  selectedCategory: '',\n};\nexport const formStorage = {\n  formData: { ...initialFormData },\n};\n\nexport function setDataToLS(key, data) {\n  const jsonObj = JSON.stringify(data);\n  localStorage.setItem(key, jsonObj);\n}\n\nexport function getDataFromLS(key, defaultValue = {}) {\n  const jsonData = localStorage.getItem(key);\n  try {\n    return jsonData ? JSON.parse(jsonData) : defaultValue;\n  } catch (error) {\n    console.warn('Failed to parse localStorage:', error);\n    showMessage({ message: error.message, type: 'error' });\n    return defaultValue;\n  }\n}\n\nexport function removeDataFromLS(key) {\n  localStorage.removeItem(key);\n}\n","export const LS_KEYS = Object.freeze({\n  form: 'search-form-state',\n});\n","import { pagination } from './pagination';\nimport refs from './refs';\n\nexport function smoothScrollAfterLoad() {\n  const productsList = refs.productsListEl;\n  if (!productsList?.children.length) return;\n\n  let previousCount = productsList.children.length - pagination.limit;\n  previousCount = Math.max(0, previousCount);\n\n  const firstNewCard = productsList.children[previousCount];\n  const secondNewCard =\n    productsList.children[previousCount + 1] || firstNewCard;\n\n  if (!firstNewCard) return;\n\n  const firstHeight = firstNewCard?.offsetHeight || 0;\n  const secondHeight = secondNewCard?.offsetHeight || 0;\n\n  const style = getComputedStyle(productsList);\n  const gap = parseFloat(style.gap) || 0;\n\n  const scrollDistance = firstHeight + secondHeight + gap;\n\n  window.scrollBy({\n    top: scrollDistance,\n    behavior: 'smooth',\n  });\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { pagination, updatePagination } from './pagination';\nimport {\n  getProductCategories,\n  getProducts,\n  getProductsByCategory,\n  getProductsBySearchValue,\n} from './products-api';\nimport refs from './refs';\nimport {\n  createCategoryList,\n  createProductsList,\n  hideLoader,\n  hideLoadMoreButton,\n  positionLoaderTop,\n  showLoader,\n  showLoadMoreButton,\n} from './render-function';\nimport { formStorage, getDataFromLS, removeDataFromLS } from './storage';\nimport { LS_KEYS } from './constants';\nimport { smoothScrollAfterLoad } from './sroll';\n\nlet { initialFormData, formData } = formStorage;\n\n//! Load functions ======================================================\nexport async function loadAndRenderCategories() {\n  try {\n    const categories = await getProductCategories();\n    createCategoryList(categories);\n    const firstCategoryBtn = refs.categoryListEl.querySelector(\n      '.js-categories__btn'\n    );\n    const isAllCategories = firstCategoryBtn.textContent === 'all';\n\n    if (firstCategoryBtn && isAllCategories) {\n      firstCategoryBtn.classList.add('categories__btn--active');\n    }\n  } catch (error) {\n    console.log(error.message);\n    showMessage({ message: error.message, type: 'error' });\n  }\n}\n\nexport async function loadAndRenderProducts({\n  selectedCategory = '',\n  currentPage = 1,\n}) {\n  let res;\n  const isSelectedCategory = selectedCategory && selectedCategory !== 'all';\n\n  try {\n    if (isSelectedCategory) {\n      res = await getProductsByCategory({\n        selectedCategory,\n        currentPage,\n      });\n    } else {\n      res = await getProducts(currentPage);\n    }\n\n    updatePagination({ total: res.total, page: currentPage });\n    renderProductsOrEmptyState(res.products);\n    hideLoader();\n  } catch (error) {\n    console.log(error.message);\n    showMessage({ message: error.message, type: 'error' });\n  }\n}\n\nexport async function loadAndRenderProductsByQuery({ searchValue }) {\n  positionLoaderTop();\n  showLoader();\n  try {\n    const res = await getProductsBySearchValue({\n      query: searchValue,\n      currentPage: pagination.page,\n    });\n    updatePagination({ total: res.total, page: pagination.page });\n    showNotification(pagination);\n    renderProductsOrEmptyState(res.products);\n    hideLoader();\n  } catch (error) {\n    console.log(error.message);\n    showMessage({ message: error.message, type: 'error' });\n  }\n}\n\n//! Categories and products ======================================================\n\nexport function noProducts(products) {\n  return products?.length === 0;\n}\n\nfunction renderProductsOrEmptyState(products) {\n  if (noProducts(products)) {\n    refs.productsListEl.innerHTML = '';\n    refs.notFoundEl.classList.add('not-found--visible');\n    hideLoadMoreButton();\n    return;\n  } else {\n    refs.notFoundEl.classList.remove('not-found--visible');\n    createProductsList(products);\n    if (pagination.page > 1) {\n      smoothScrollAfterLoad();\n    }\n    checkEndOfCollection();\n  }\n}\n\nexport function toggleActiveCategory({ targetEl, reset = false }) {\n  const prevSelectedCategoryEl = document.querySelector(\n    '.categories__btn--active'\n  );\n\n  if (prevSelectedCategoryEl) {\n    prevSelectedCategoryEl.classList.remove('categories__btn--active');\n    if (reset) return;\n  }\n\n  if (targetEl) {\n    targetEl.classList.add('categories__btn--active');\n  }\n}\n\n//! Form helpers ======================================================\nexport function updateSubmitState(formData) {\n  refs.searchFormSubmitBtnEl.disabled = !isFormValid(formData);\n}\n\nexport function isFormValid(data) {\n  const searchText = data?.searchValue.trim() ?? '';\n  return searchText.length > 0;\n}\n\nexport function trimFormData(formDataObj) {\n  return Object.fromEntries(\n    Object.entries(formDataObj).map(([key, value]) => [key, value.trim()])\n  );\n}\n\nexport function resetForm() {\n  refs.searchFormEl.reset();\n  loadAndRenderProducts();\n  formData = { ...initialFormData };\n  formData.searchValue = '';\n  removeDataFromLS(LS_KEYS.form);\n  updateSubmitState();\n}\n\nexport function initFormState(formData) {\n  try {\n    const savedFormData = getDataFromLS(LS_KEYS.form);\n    if (savedFormData && typeof savedFormData === 'object') {\n      Object.keys(formData).forEach(key => {\n        formData[key] = savedFormData[key] || '';\n      });\n    }\n\n    const searchTextInputEl = refs.searchFormEl.elements.searchValue;\n\n    if (searchTextInputEl) {\n      searchTextInputEl.value = formData.searchValue;\n      updateSubmitState(formData);\n    }\n  } catch (error) {\n    console.log(error);\n    showMessage({ message: error.message, type: 'error' });\n  }\n}\n\n// Pagination ======================================================\nexport function checkEndOfCollection() {\n  const noMore = pagination.page >= pagination.totalPages;\n\n  if (noMore) {\n    hideLoadMoreButton();\n    return;\n  }\n  showLoadMoreButton();\n}\n\n// Notification ======================================================\nexport function showNotification(pagination) {\n  if (pagination.page === 1 && pagination.totalPages !== 0) {\n    showMessage({ message: `Total pages: ${pagination.totalPages}` });\n  } else if (pagination.totalPages === 0) {\n    showMessage({ message: `Nothing found` });\n  } else if (pagination.page === pagination.totalPages) {\n    showMessage({ message: 'This is the last page' });\n  }\n}\n\nexport function showMessage({ message, type = 'info' }) {\n  iziToast[type]({ message });\n}\n","import {\n  checkEndOfCollection,\n  isFormValid,\n  loadAndRenderCategories,\n  loadAndRenderProducts,\n  loadAndRenderProductsByQuery,\n  resetForm,\n  showMessage,\n  toggleActiveCategory,\n  trimFormData,\n  updateSubmitState,\n} from './helpers';\nimport { pagination, updatePagination } from './pagination';\nimport refs from './refs';\nimport {\n  hideLoader,\n  hideLoadMoreButton,\n  positionLoaderTop,\n  renderModalProduct,\n  showLoader,\n} from './render-function';\nimport { formStorage, setDataToLS } from './storage';\nimport { LS_KEYS } from './constants';\n\nlet { formData, searchValue } = formStorage;\nlet { selectedCategory } = formData;\n\n// Categories and products ======================================================\nexport async function handleDOMContentLoaded() {\n  await loadAndRenderCategories();\n  await loadAndRenderProducts({ currentPage: pagination.page });\n}\n\nexport async function handleCategoryBtnClick(e) {\n  positionLoaderTop();\n  showLoader();\n\n  if (!e.target.classList.contains('js-categories__btn')) return;\n  searchValue = '';\n  toggleActiveCategory({ targetEl: e.target });\n  selectedCategory = e.target.textContent;\n  await loadAndRenderProducts({\n    selectedCategory,\n    currentPage: 1,\n  });\n  updatePagination({ reset: true });\n}\n\nexport function handleProductElClick(e) {\n  const item = e.target.closest('.js-products__item');\n  if (!item) return;\n  renderModalProduct(item.dataset.id);\n}\n\nexport async function handleLoadMoreBtnClick() {\n  showLoader();\n\n  updatePagination({ page: pagination.page + 1 });\n  refs.loadMoreBtnEl.disabled = true;\n  hideLoadMoreButton();\n\n  try {\n    if (searchValue) {\n      await loadAndRenderProductsByQuery({\n        searchValue,\n      });\n    } else {\n      await loadAndRenderProducts({\n        selectedCategory,\n        currentPage: pagination.page,\n      });\n    }\n  } catch (error) {\n    console.log(error.message);\n    showMessage({ message: error.message, type: 'error' });\n  } finally {\n    checkEndOfCollection();\n    refs.loadMoreBtnEl.disabled = false;\n    hideLoader();\n  }\n}\n\n// Form input ======================================================\nexport function handleFormElInput(e) {\n  const { name, value } = e.target;\n  if (name in formData) {\n    formData[name] = value;\n    setDataToLS(LS_KEYS.form, formData);\n  }\n\n  updateSubmitState(formData);\n}\n\n//  Form submit ======================================================\nexport function handleSearchFormSubmit(e) {\n  e.preventDefault();\n\n  const trimmedFormData = trimFormData(formData);\n\n  if (!isFormValid(trimmedFormData)) {\n    updateSubmitState(trimmedFormData);\n    return;\n  }\n\n  formData = { ...trimmedFormData };\n  setDataToLS(LS_KEYS.form, formData);\n  searchValue = formData.searchValue;\n\n  updatePagination({ reset: true });\n  loadAndRenderProductsByQuery({ searchValue });\n  toggleActiveCategory({ reset: true });\n  resetForm();\n}\n","//Логіка сторінки Home\n\nimport {\n  handleCategoryBtnClick,\n  handleDOMContentLoaded,\n  handleFormElInput,\n  handleProductElClick,\n  handleSearchFormSubmit,\n  handleLoadMoreBtnClick,\n} from './js/handlers';\nimport { initFormState, resetForm } from './js/helpers';\nimport refs from './js/refs';\n\nimport debounce from 'debounce';\nimport { formStorage } from './js/storage';\n\ninitFormState(formStorage.formData);\n//!======================================================\ndocument.addEventListener('DOMContentLoaded', handleDOMContentLoaded);\nrefs.categoryListEl.addEventListener('click', handleCategoryBtnClick);\nrefs.productsListEl.addEventListener('click', handleProductElClick);\nrefs.searchFormEl.addEventListener('input', debounce(handleFormElInput, 200));\nrefs.searchFormEl.addEventListener('submit', handleSearchFormSubmit);\nrefs.searchFormClearBtnEl.addEventListener('click', resetForm);\nrefs.loadMoreBtnEl.addEventListener('click', handleLoadMoreBtnClick);\n"],"names":["paginationInitState","pagination","updatePagination","page","total","reset","axios","Axios","getProductCategories","getProducts","currentPage","params","createParams","getProductsByCategory","selectedCategory","getProductById","id","getProductsBySearchValue","query","limit","rest","skip","refs","closeModal","handleBackdropClick","openModal","handleEscKeydown","e","categoryItemTemplate","item","categoryItemsTemplate","items","createCategoryList","categories","markup","productItemTemplate","thumbnail","title","brand","category","price","productItemsTemplate","createProductsList","products","modalProductTemplate","tags","description","shippingInformation","returnPolicy","images","image","tagsMarkup","productTagsTemplate","productTagTemplate","tag","renderModalProduct","product","modalProduct","error","showMessage","showLoader","hideLoader","positionLoaderTop","showLoadMoreButton","hideLoadMoreButton","initialFormData","formStorage","setDataToLS","key","data","jsonObj","getDataFromLS","defaultValue","jsonData","removeDataFromLS","LS_KEYS","smoothScrollAfterLoad","productsList","previousCount","firstNewCard","secondNewCard","firstHeight","secondHeight","style","gap","scrollDistance","formData","loadAndRenderCategories","firstCategoryBtn","isAllCategories","loadAndRenderProducts","res","isSelectedCategory","renderProductsOrEmptyState","loadAndRenderProductsByQuery","searchValue","showNotification","noProducts","checkEndOfCollection","toggleActiveCategory","targetEl","prevSelectedCategoryEl","updateSubmitState","isFormValid","trimFormData","formDataObj","value","resetForm","initFormState","savedFormData","searchTextInputEl","message","type","iziToast","handleDOMContentLoaded","handleCategoryBtnClick","handleProductElClick","handleLoadMoreBtnClick","handleFormElInput","name","handleSearchFormSubmit","trimmedFormData","debounce"],"mappings":"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"}